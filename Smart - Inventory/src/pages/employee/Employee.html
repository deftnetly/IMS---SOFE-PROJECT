<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMS â€“ Employee Panel</title>
    <link rel="stylesheet" href="../../styles/sidebar.css">
    <link rel="stylesheet" href="../../styles/content.css">
    <link rel="icon" type="image/png" href="../../assets/SIMS.png">
</head>
<body>
    <div class="sidebar">
        <a href="#" onclick="loadContent('dashboard', '1_dashboard')">
            <img src="../../assets/dashboard.white.png" alt="Dashboard Icon">Dashboard
        </a>
        <a href="#" onclick="loadContent('products', '2_products')">
            <img src="../../assets/white.png" alt="Products Icon">Products
        </a>
        <a href="#" onclick="loadContent('checkout', '3_checkout')">
            <img src="../../assets/checkout.white.png" alt="Checkout Icon">Checkout
        </a>
        <a href="#" onclick="loadContent('transactions', '4_transactions')">
            <img src="../../assets/transaction.white.png" alt="Transactions Icon">Transaction History
        </a>
        <a href="#" class="logout" onclick="logout()">
            <img src="../../assets/exit.white.png" alt="Logout Icon">Logout
        </a>
    </div>

    <div class="content" id="main-content">
        <!-- Dynamic content will load here -->
    </div>

    <script>
        // Load content dynamically
        async function loadContent(section, folder) {
            try {
                document.getElementById('main-content').innerHTML = `
                    <div class="content-section">
                        <h2>Loading ${section}...</h2>
                    </div>`;

                const response = await fetch(`${folder}/${section}.html`);
                if (!response.ok) throw new Error(`Error ${response.status}: ${response.statusText}`);

                const content = await response.text();
                document.getElementById('main-content').innerHTML = content;

                // Remove old section scripts
                document.querySelectorAll('script[data-section]').forEach(script => script.remove());

                // Load JS specific to the section (if exists)
                if (['products', 'checkout', 'transactions'].includes(section)) {
                    const script = document.createElement('script');
                    script.src = `../../scripts/${section}.js`;
                    script.setAttribute('data-section', section);
                    document.body.appendChild(script);
                }
            } catch (error) {
                document.getElementById('main-content').innerHTML = `
                    <div class="content-section">
                        <h2>Error loading ${section}</h2>
                        <p>${error.message}</p>
                    </div>`;
            }
        }

        // Default: Load Dashboard
        document.addEventListener('DOMContentLoaded', () => {
            loadContent('dashboard', '1_dashboard');
        });

        // Logout
        function logout() {
            const confirmLogout = confirm("Are you sure you want to log out?");
            if (confirmLogout) {
                document.body.style.transition = "opacity 0.5s ease";
                document.body.style.opacity = 0;
                setTimeout(() => {
                    localStorage.clear();
                    sessionStorage.clear();
                    window.location.href = "../../login/login.html";
                }, 500);
            }
        }
    </script>
</body>
</html>
